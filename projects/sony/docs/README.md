# Sonyコンペメモ

## 気づき
* Cityがtrainとtestで重複がない。のでgroup kfoldが良さそう&Cityは予測には使わない
* Countryで集約特徴量を作ると精度改善
  * ratioやdiff_ratioをいれると悪化
* Cityで集約特徴量を作ると精度悪化(train+testでfitしているので実装は問題なさそう)
  * できた特徴量からCityが伝わってしまっている？
* lag特徴量も入れたが改善せず
  * あまり時系列的な数理モデルではなさそう
* kfoldにしたらかなりかなりCVが上がってしまう
  * Cityがリークしていれば当てやすくなるということ
* catboostとlightgbmの単純なアンサンブルも効いた
* catboostの方がlightgbmよりも良かったけど誤差かもしれない
* クラスタリング結果はクラスターをカテゴリで入れるのは微改善、集約すると悪化
  * 緯度経度でクラスタリングすると当たり前だけどCity近くが同じカテゴリになって怪しそう
* 各統計量の最大-最小(rng)を入れ、相関top10を取り直してCountry集約特徴量をアップデートしたら上がった
* 標準偏差、標準誤差を入れたが改善せず
* 同じ統計量(例えばcnt)となる気体を標準化してから平均した特徴量を作ったが精度改善にはつながらず


## アイデア

* [ ] 数値特徴量同士の四則演算系の特徴量
* [x] 緯度経度から地域ごとにクラスタリングする
* [x] 日付をtimestampにする
* [x] ラグ特徴量
* [x] monthで集約特徴量